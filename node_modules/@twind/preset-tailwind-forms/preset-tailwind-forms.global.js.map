{"version":3,"file":"preset-tailwind-forms.global.js","sources":["../src/preset-tailwind-forms.ts"],"sourcesContent":["// Based on https://github.com/tailwindlabs/tailwindcss-forms/blob/ce5386b66a8a5833372fd245e95bf3c4e21da8d3/src/index.js\n// License MIT\n\nimport type { Preset, CSSObject, MaybeThunk, Preflight } from '@twind/core'\nimport type { TailwindTheme } from '@twind/preset-tailwind'\n\nimport { toColorValue } from '@twind/core'\n\nimport { gray, blue } from '@twind/preset-tailwind/colors'\nimport defaultTheme from '@twind/preset-tailwind/defaultTheme'\n\nconst [baseFontSize, baseLineHeight] = defaultTheme.fontSize.base\nconst { spacing, borderWidth, borderRadius } = defaultTheme\n\nexport interface TailwindFormsPresetOptions {\n  strategy?: 'base' | 'class'\n}\n\nexport default function presetTailwindForms({\n  strategy,\n}: TailwindFormsPresetOptions = {}): Preset<TailwindTheme> {\n  const config: Preset<TailwindTheme> = {}\n\n  if (strategy !== 'base') {\n    config.rules = [\n      [\n        '(' + [...new Set(rules.flatMap((r) => r.c).filter(Boolean))].join('|') + ')',\n        (match, context) =>\n          ({\n            '@layer base': rules\n              .filter((r) => r.c?.includes(match[1]))\n              .map(({ c: classes, s: styles }) => ({\n                ['' +\n                (classes as string[]).map((className) => '.' + context.e(context.h(className)))]:\n                  typeof styles == 'function' ? styles(context) : styles,\n              })),\n          } as CSSObject),\n      ],\n    ]\n  }\n\n  if (strategy !== 'class') {\n    config.preflight = (context) => {\n      const preflight: Preflight = {}\n\n      for (const { b: base, s: styles } of rules) {\n        preflight['' + base] = typeof styles == 'function' ? styles(context) : styles\n      }\n\n      return preflight\n    }\n  }\n\n  return config\n}\n\nconst rules: {\n  b: string[]\n  c?: string[]\n  s: MaybeThunk<CSSObject, TailwindTheme>\n}[] = [\n  {\n    b: [\n      \"[type='text']\",\n      \"[type='email']\",\n      \"[type='url']\",\n      \"[type='password']\",\n      \"[type='number']\",\n      \"[type='date']\",\n      \"[type='datetime-local']\",\n      \"[type='month']\",\n      \"[type='search']\",\n      \"[type='tel']\",\n      \"[type='time']\",\n      \"[type='week']\",\n      '[multiple]',\n      'textarea',\n      'select',\n    ],\n    c: ['form-input', 'form-textarea', 'form-select', 'form-multiselect'],\n    s: ({ theme }) => ({\n      appearance: 'none',\n      'background-color': '#fff',\n      'border-color': toColorValue(theme('colors.gray.500', gray[500])),\n      'border-width': borderWidth['DEFAULT'],\n      'border-radius': borderRadius.none,\n      'padding-top': spacing[2],\n      'padding-right': spacing[3],\n      'padding-bottom': spacing[2],\n      'padding-left': spacing[3],\n      'font-size': baseFontSize,\n      'line-height': baseLineHeight,\n      '--tw-shadow': '0 0 #0000',\n      '&:focus': {\n        outline: '2px solid transparent',\n        'outline-offset': '2px',\n        '--tw-ring-inset': 'var(--tw-empty,/*!*/ /*!*/)',\n        '--tw-ring-offset-width': '0px',\n        '--tw-ring-offset-color': '#fff',\n        '--tw-ring-color': toColorValue(theme('colors.blue.600', blue[600])),\n        '--tw-ring-offset-shadow': `var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color)`,\n        '--tw-ring-shadow': `var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color)`,\n        'box-shadow': `var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow)`,\n        'border-color': toColorValue(theme('colors.blue.600', blue[600])),\n      },\n    }),\n  },\n  {\n    b: ['input', 'textarea'],\n    c: ['form-input', 'form-textarea'],\n    s: ({ theme }) => ({\n      '&::placeholder': {\n        color: toColorValue(theme('colors.gray.500', gray[500])),\n        opacity: '1',\n      },\n    }),\n  },\n  {\n    b: [''],\n    c: ['form-input'],\n    s: {\n      '&::-webkit-datetime-edit-fields-wrapper': {\n        padding: '0',\n      },\n      // Unfortunate hack until https://bugs.webkit.org/show_bug.cgi?id=198959 is fixed.\n      // This sucks because users can't change line-height with a utility on date inputs now.\n      // Reference: https://github.com/twbs/bootstrap/pull/31993\n      '&::-webkit-date-and-time-value': {\n        'min-height': '1.5em',\n      },\n    },\n  },\n  {\n    b: ['select'],\n    c: ['form-select'],\n    s: ({ theme }) => ({\n      'background-image': `url(\"${svgToDataUri(\n        `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 20 20\"><path stroke=\"${toColorValue(\n          theme('colors.gray.500', gray[500]),\n        )}\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M6 8l4 4 4-4\"/></svg>`,\n      )}\")`,\n      'background-position': `right ${spacing[2]} center`,\n      'background-repeat': `no-repeat`,\n      'background-size': `1.5em 1.5em`,\n      'padding-right': spacing[10],\n      'color-adjust': `exact`,\n    }),\n  },\n  {\n    b: ['[multiple]'],\n    // class: null,\n    s: {\n      'background-image': 'initial',\n      'background-position': 'initial',\n      'background-repeat': 'unset',\n      'background-size': 'initial',\n      'padding-right': spacing[3],\n      'color-adjust': 'unset',\n    },\n  },\n  {\n    b: [`[type='checkbox']`, `[type='radio']`],\n    c: ['form-checkbox', 'form-radio'],\n    s: ({ theme }) => ({\n      appearance: 'none',\n      padding: '0',\n      'color-adjust': 'exact',\n      display: 'inline-block',\n      'vertical-align': 'middle',\n      'background-origin': 'border-box',\n      'user-select': 'none',\n      'flex-shrink': '0',\n      height: spacing[4],\n      width: spacing[4],\n      color: toColorValue(theme('colors.blue.600', blue[600])),\n      'background-color': '#fff',\n      'border-color': toColorValue(theme('colors.gray.500', gray[500])),\n      'border-width': borderWidth['DEFAULT'],\n      '--tw-shadow': '0 0 #0000',\n      '&:focus': {\n        outline: '2px solid transparent',\n        'outline-offset': '2px',\n        '--tw-ring-inset': 'var(--tw-empty,/*!*/ /*!*/)',\n        '--tw-ring-offset-width': '2px',\n        '--tw-ring-offset-color': '#fff',\n        '--tw-ring-color': toColorValue(theme('colors.blue.600', blue[600])),\n        '--tw-ring-offset-shadow': `var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color)`,\n        '--tw-ring-shadow': `var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color)`,\n        'box-shadow': `var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow)`,\n      },\n      '&:checked': {\n        'border-color': `transparent`,\n        'background-color': `currentColor`,\n        'background-size': `100% 100%`,\n        'background-position': `center`,\n        'background-repeat': `no-repeat`,\n        '&:hover,&:focus': {\n          'border-color': 'transparent',\n          'background-color': 'currentColor',\n        },\n      },\n    }),\n  },\n  {\n    b: [`[type='checkbox']`],\n    c: ['form-checkbox'],\n    s: {\n      'border-radius': borderRadius['none'],\n      '&:checked': {\n        'background-image': `url(\"${svgToDataUri(\n          `<svg viewBox=\"0 0 16 16\" fill=\"white\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z\"/></svg>`,\n        )}\")`,\n      },\n      '&:indeterminate': {\n        'background-image': `url(\"${svgToDataUri(\n          `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path stroke=\"white\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 8h8\"/></svg>`,\n        )}\")`,\n        'border-color': `transparent`,\n        'background-color': `currentColor`,\n        'background-size': `100% 100%`,\n        'background-position': `center`,\n        'background-repeat': `no-repeat`,\n        '&:hover,&:focus': {\n          'border-color': 'transparent',\n          'background-color': 'currentColor',\n        },\n      },\n    },\n  },\n  {\n    b: [`[type='radio']`],\n    c: ['form-radio'],\n    s: {\n      'border-radius': '100%',\n      '&:checked': {\n        'background-image': `url(\"${svgToDataUri(\n          `<svg viewBox=\"0 0 16 16\" fill=\"white\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"8\" cy=\"8\" r=\"3\"/></svg>`,\n        )}\")`,\n      },\n    },\n  },\n  {\n    b: [`[type='file']`],\n    // class: null,\n    s: {\n      background: 'unset',\n      'border-color': 'inherit',\n      'border-width': '0',\n      'border-radius': '0',\n      padding: '0',\n      'font-size': 'unset',\n      'line-height': 'inherit',\n      '&:focus': {\n        outline: [`1px solid ButtonText`, `1px auto -webkit-focus-ring-color`],\n      },\n    },\n  },\n]\n\n// Based on https://github.com/tigt/mini-svg-data-uri/blob/master/index.js (License MIT)\nfunction specialHexEncode(match: string): string {\n  switch (\n    match // Browsers tolerate these characters, and they're frequent\n  ) {\n    case '%20':\n      return ' '\n    case '%3D':\n      return '='\n    case '%3A':\n      return ':'\n    case '%2F':\n      return '/'\n    default:\n      return match.toLowerCase() // compresses better\n  }\n}\n\nfunction svgToDataUri(svgString: string): string {\n  return (\n    'data:image/svg+xml,' +\n    encodeURIComponent(svgString.trim().replace(/\\s+/g, ' ').replace(/\"/g, \"'\")).replace(\n      /%[\\dA-F]{2}/g,\n      specialHexEncode,\n    )\n  )\n}\n"],"names":["twind","presetTailwindForms","core","colors","defaultTheme","defaultTheme__default","e","__esModule","default","baseFontSize","baseLineHeight","fontSize","base","spacing","borderWidth","borderRadius","rules","b","c","s","theme","appearance","toColorValue","gray","none","outline","blue","color","opacity","padding","svgToDataUri","display","height","width","background","specialHexEncode","match","toLowerCase","svgString","encodeURIComponent","trim","replace","strategy","config","Set","flatMap","r","filter","Boolean","join","context","includes","map","classes","styles","className","h","preflight","presetTailwind_colors","presetTailwind_defaultTheme"],"mappings":"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"}